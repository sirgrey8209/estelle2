# 3-VERIFY: 테스트 검증

## 입력
- tdd 파일: {{tdd파일}}
- 테스트 파일: {{테스트파일}}

## 역할
작성된 테스트가 **품질 기준을 충족**하는지 검증하고, **실패 확인**까지 수행하라.

---

## 검증 체크리스트

### FIRST 원칙
- **F**ast - 밀리초 단위로 빠르게 실행 가능한가?
- **I**ndependent - 다른 테스트 순서/상태에 의존하지 않는가?
- **R**epeatable - 어떤 환경에서도 동일 결과인가?
- **S**elf-Validating - pass/fail이 명확한가?
- **T**imely - TDD 흐름에서 이미 충족 (구현 전 테스트 작성)

### 목표 반영
- plan의 구현 목표가 테스트에 반영되어 있는가?
- 테스트가 요구사항을 정확히 검증하는가?

### 완성도
- 정상 케이스(happy path)가 있는가?
- 엣지 케이스가 있는가? (빈 입력, null, 경계값)
- 에러 케이스가 있는가?

### 구조
- AAA 패턴을 따르는가?
- 테스트당 하나의 관심사만 검증하는가?
- 중복 테스트가 없는가?

---

## 검증 후 처리

### 검증 통과 시

테스트 실행 (파일 경로에서 패키지 추론):
```bash
# 예: packages/pylon/tests/state.test.ts
pnpm --filter @estelle/pylon test tests/state.test.ts
```

- **실패하면** (정상): → 4-IMPL로 진행
  ```
  ✅ 테스트 검증 통과
  ❌ 테스트 실패 확인 (정상)
  → 4-IMPL 진행
  ```

- **통과하면** (비정상): → 2-TEST로 복귀
  ```
  ⚠️ 테스트가 이미 통과함
  → 구현 없이 통과하는 테스트는 잘못됨
  → 2-TEST로 돌아가서 수정
  ```

### 검증 실패 시

```
⚠️ 테스트 수정 필요
1. [문제점]: 설명
2. [문제점]: 설명
→ 2-TEST로 돌아가서 수정
```

---

## tdd 문서 업데이트

검증 통과 + 실패 확인 완료 시:

```markdown
## 상태
🔍 3-VERIFY

## 로그
- [YYMMDD HH:MM] 1-PLAN 승인
- [YYMMDD HH:MM] 2-TEST 완료
- [YYMMDD HH:MM] 3-VERIFY 통과 (테스트 실패 확인)  ← 추가
```

---

## 출력

- 검증 결과 (통과/실패)
- 실패 확인 결과
- 다음 단계 안내
